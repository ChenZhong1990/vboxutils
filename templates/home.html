<!DOCTYPE html>
<html>
<head>
    <title>VBRAD maps - {{title}}</title>

    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

    <style type="text/css">
      html, body { 
        width: 100%; height: 100%; 
        margin:0; padding: 0;
      }
      body {
        width: 90%;
        margin: 10px;
        padding: 25px 5%;  
        font-family: Helvetica Neue, Helvetica, Arial, sans;
      }
      #map_canvas { width: 100%; height: 60%; margin: 0; padding: 0;} 
    </style>

    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?v=3&key={{api_key}}">
    </script>
    
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {{map_options|tojson|safe}};
        mapOptions.mapTypeId = google.maps.MapTypeId.HYBRID;
        var map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
        {% if marker %}
            var marker = new google.maps.Marker({{marker|tojson|safe}});
            marker.setMap(map);
        {% endif %}
        
        // Set the feature's colour based on its color property
        map.data.setStyle(function(feature) {
            var color = feature.getProperty('color');
            return {
              strokeColor: color,
              strokeWeight: feature.getProperty('weight')
            };
        });
        map.data.loadGeoJson('/route.json');
      };
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
</head>

<body>
    <h1>{{title}}</h1>
    <div id="map_canvas"></div>
    <!-- <video src="/static/VBOX_20150709131857_0001.mp4" style="width: 220; height: auto; autoplay: true;"></video> -->
</body>
</html>